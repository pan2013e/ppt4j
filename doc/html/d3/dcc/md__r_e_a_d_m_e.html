<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ppt4j: PPT4J</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ppt4j<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d3/dcc/md__r_e_a_d_m_e.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">PPT4J</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<p><a href="https://doi.org/10.5281/zenodo.10397354"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.10397354.svg" alt="DOI" style="pointer-events: none;" class="inline"/></a> <a href="https://hub.docker.com/r/zhiyuanpan/ppt4j"><img src="https://img.shields.io/badge/Docker%20Hub-zhiyuanpan/ppt4j-blue.svg" alt="Docker" style="pointer-events: none;" class="inline"/></a></p>
<p>This is the replication package for the ICSE 2024 paper <em>"PPT4J: Patch Presence Test for Java Binaries"</em>.</p>
<p><b>Note:</b> For more details on the paper, please refer to <a href="https://dl.acm.org/doi/abs/10.1145/3597503.3639231">https://dl.acm.org/doi/abs/10.1145/3597503.3639231</a>.</p>
<p><b>Note:</b> This is a branch with <b>AI-generated</b> code comments and documentation.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md2"></a>
Project structure</h1>
<div class="fragment"><div class="line">.</div>
<div class="line">├── Dockerfile</div>
<div class="line">├── README.md</div>
<div class="line">├── all.iml</div>
<div class="line">├── download.sh</div>
<div class="line">├── framework</div>
<div class="line">├── lib</div>
<div class="line">├── misc</div>
<div class="line">├── pom.xml</div>
<div class="line">├── replicate_rq1.py</div>
<div class="line">├── scripts</div>
<div class="line">└── urls.txt</div>
</div><!-- fragment --><ul>
<li>The <code>framework</code> folder contains the code of PPT4J</li>
<li>The <code>misc</code> folder contains an example of using PPT4J<ul>
<li>Please checkout <code><a class="el" href="../../de/dc6/_demo_8java.html">misc/src/main/java/ppt4j/Demo.java</a></code> for detailed usage.</li>
</ul>
</li>
<li>The <code>scripts</code> folder contains utility scripts, written in Python</li>
<li>The <code>lib</code> folder contains necessary jars</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Requirements</h1>
<p>Note: We provide Docker images for replication. If you use Docker, you can just jump to the section "Using docker".</p>
<h2><a class="anchor" id="autotoc_md4"></a>
System requirements</h2>
<ul>
<li>This project is a prototype implementation and only supports UNIX-like operating systems.</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Software requirements</h2>
<ul>
<li><b>JDK, Maven, Python</b></li>
<li>The versions of software we use:<ul>
<li>JDK 17.0.2 (Java SE 17.0.2, Oracle HotSpot 64-Bit Server VM, build 17.0.2+8-LTS-86)</li>
<li>Apache Maven 3.9.1</li>
<li>Python 3.9.10</li>
</ul>
</li>
<li>It should be fine if you use other recent versions of Maven and Python.</li>
<li>We strongly recommend that you use the same Oracle JDK 17.0.2 for replication. Run <code>export JAVA_HOME=...</code> command to make sure that maven uses the expected version of JDK.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Setting up the environment</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
On host machine</h2>
<ul>
<li><a href="https://doi.org/10.5281/zenodo.10397354">Download the dataset</a> and extract the items to your preferred location. Then set<ul>
<li><code>ppt4j.database.root</code> field in <code>framework/src/main/resources/ppt4j.properties</code> to that location. Or you can just extract to your home directory to make the property file unaltered.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Using Docker</h2>
<ul>
<li>We provide a <a href="https://hub.docker.com/r/zhiyuanpan/ppt4j">Docker image</a> as an alternative. To start a container, the host system and architecture should be <code>Linux, x86_64(amd64)</code>.</li>
</ul>
<div class="fragment"><div class="line"># Host OS</div>
<div class="line">$ docker pull zhiyuanpan/ppt4j</div>
<div class="line">$ # alternative: docker pull zhiyuanpan/ppt4j:minimal-latest</div>
<div class="line">$ docker run --rm -it zhiyuanpan/ppt4j</div>
</div><!-- fragment --><ul>
<li>The docker images on Docker Hub have two tags: <code>minimal</code>(~250M download size, ~500M final usage) and <code>complete</code>(~13G download size, ~22G final usage).<ul>
<li>The <code>complete</code> one provides an out-of-the-box experience (with dataset). Commands described in the next section can be executed without any further configuration.</li>
<li>The <code>minimal</code> one provides a minimal running environment that satisfies software requirements (without dataset). To test the dataset in <code>minimal</code> containers, please first run <code>bash download.sh</code> in the <b>home directory</b>, and the script will start the downloading process.</li>
</ul>
</li>
<li>To test other Java binaries, you can mount custom directories in the <code>docker run</code> command.</li>
</ul>
<p>For detailed script/executable usage, please refer to the documentation below.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Run PPT4J</h1>
<p>For a quick start, you can run <code>python replicate_rq1.py</code> to get the results of RQ1 in the paper.</p>
<p>You can also use the Python scripts inside the <code>scripts</code> folder for: <b>project building</b> and <b>testing</b>.</p>
<ul>
<li>In the <b>project root</b> (where <code><a class="el" href="../../d9/dd6/_r_e_a_d_m_e_8md.html">README.md</a></code> and <code>all.iml</code> are located), run <code>python -m scripts.&lt;name&gt; &lt;args&gt;</code>.<ul>
<li>Available <code>&lt;name&gt;</code>: <code>build, test</code></li>
<li><code>scripts.build</code>: wrapper of maven commands; no arg; build the <code>Java</code> projects</li>
<li><code>scripts.test</code>: perform tests on the dataset. Please leave <code>&lt;args&gt;</code> empty for detailed usage of this subcommand.</li>
</ul>
</li>
<li>Example <div class="fragment"><div class="line">$ python -m scripts.build</div>
<div class="line">$ python -m scripts.test postpatch 1</div>
<div class="line"> </div>
<div class="line">[test.py           ]  INFO - Running test 1 postpatch</div>
<div class="line">[.a.p.PatchAnalyzer]  INFO - Ground truth binary type in dataset: postpatch</div>
<div class="line">[.a.p.PatchAnalyzer]  INFO - Analyzing patch for fastjson, CVE ID: CVE-2017-18349, Database ID: 1</div>
<div class="line">[.a.p.PatchAnalyzer]  INFO - Result: 1.0</div>
<div class="line">[p.u.AspectUtils   ]  INFO - Result: patch is present</div>
</div><!-- fragment --></li>
</ul>
<div class="fragment"><div class="line">$ python -m scripts.test all</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
Misc</h1>
<ul>
<li>The compiled PPT4J only works as separate bytecode files in <code>framework/target/classes</code>. Packing them into a jar and use the jar will lead to unexpected behaviours, due to our implementation and the classpath mechanism in newer Java versions. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
